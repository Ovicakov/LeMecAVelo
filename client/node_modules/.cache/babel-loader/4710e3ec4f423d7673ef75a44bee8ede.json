{"ast":null,"code":"import _slicedToArray from \"/Users/clementhere/Documents/De\\u0301v_web/Projets_perso/LeMecAVelo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/clementhere/Documents/De\\u0301v_web/Projets_perso/LeMecAVelo/client/src/components/Admin.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Cards from './Cards';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport './Admin.css';\nexport default function Admin() {\n  // ADD\n  const _useState = useState(''),\n        _useState2 = _slicedToArray(_useState, 2),\n        title = _useState2[0],\n        setTitle = _useState2[1];\n\n  const _useState3 = useState(''),\n        _useState4 = _slicedToArray(_useState3, 2),\n        description = _useState4[0],\n        setDescription = _useState4[1];\n\n  const _useState5 = useState(''),\n        _useState6 = _slicedToArray(_useState5, 2),\n        imageLink = _useState6[0],\n        setImageLink = _useState6[1];\n\n  const _useState7 = useState([]),\n        _useState8 = _slicedToArray(_useState7, 2),\n        categorie = _useState8[0],\n        setCategorie = _useState8[1];\n\n  const _useState9 = useState([]),\n        _useState10 = _slicedToArray(_useState9, 2),\n        article = _useState10[0],\n        setArticle = _useState10[1];\n\n  const _useState11 = useState(),\n        _useState12 = _slicedToArray(_useState11, 2),\n        categoryId = _useState12[0],\n        setCategoryId = _useState12[1]; // DELETE\n\n\n  const _useState13 = useState([]),\n        _useState14 = _slicedToArray(_useState13, 2),\n        articleByCategory = _useState14[0],\n        setArticleByCategory = _useState14[1]; // MODIFY\n\n\n  const _useState15 = useState(false),\n        _useState16 = _slicedToArray(_useState15, 2),\n        modal = _useState16[0],\n        setModal = _useState16[1];\n\n  const _useState17 = useState(),\n        _useState18 = _slicedToArray(_useState17, 2),\n        modifyArticle = _useState18[0],\n        setModifyArticle = _useState18[1];\n\n  const _useState19 = useState(''),\n        _useState20 = _slicedToArray(_useState19, 2),\n        modifyContent = _useState20[0],\n        setModifyContent = _useState20[1]; // ADD NEW ARTICLE\n\n\n  useEffect(() => {\n    axios.get('http://localhost:4000/article').then(res => setArticle(res.data));\n    axios.get('http://localhost:4000/article').then(res => setArticleByCategory(res.data));\n    axios.get('http://localhost:4000/categorie').then(res => setCategorie(res.data));\n  }, []);\n\n  const articleByCat = event => {\n    const value = event.target.value;\n    axios.get(`http://localhost:4000/article/getCatId/${value}`).then(res => setArticle(res.data));\n    setCategoryId(parseInt(value));\n  };\n\n  const onChangeTitle = event => {\n    const value = event.target.value;\n    setTitle(value);\n  };\n\n  const onChangeDescription = event => {\n    const value = event.target.value;\n    setDescription(value);\n  };\n\n  const onChangeImageLink = event => {\n    const value = event.target.value;\n    setImageLink(value);\n  };\n\n  const handleSubmitAdd = () => {\n    axios.post('http://localhost:4000/article/', {\n      art_name: title,\n      art_description: description,\n      art_photo: imageLink,\n      art_cat_id: categoryId\n    }).then(function (response) {\n      console.log('then', response);\n    }).catch(function (error) {\n      console.log('catch', error);\n    });\n  }; // DELETE\n\n\n  const articleWithCat = e => {\n    axios.get(`http://localhost:4000/article/getCatId/${e.target.value}`).then(res => setArticleByCategory(res.data));\n  };\n\n  const deleteArticle = artId => {\n    axios.delete(`http://localhost:4000/article/${artId}`).then(function (response) {\n      console.log('then', response);\n    }).catch(function (error) {\n      console.log('catch', error);\n    });\n    setTimeout(() => 200, window.location.reload());\n  };\n\n  const renderDescription = description => React.createElement(\"p\", {\n    className: \"textDescriptionAdmin\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, description); // MODIFY\n\n\n  const onChangeArticle = event => {\n    const value = event.target.value;\n    setModifyContent(value);\n  };\n\n  const onCloseModal = () => setModal(false);\n\n  const toggleModalByArticle = id => {\n    axios.get(`http://localhost:4000/article/${id}`).then(res => setModifyArticle(res.data[0]));\n    setModal(!modal);\n  };\n\n  const string_copy = (' ' + (modifyContent === null || modifyContent === void 0 ? void 0 : modifyContent.art_description)).slice(1);\n  return React.createElement(\"div\", {\n    className: \"Admin\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"addArticle\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"titleReal\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"titleAddArticle\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, \"Ajouter un article\"), React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, \"Titre de l'article :\"), React.createElement(\"input\", {\n    placeholder: \"titre\",\n    value: title,\n    onChange: onChangeTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"descriptionForm\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"textDescriptionForm\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, \"Description de l'article :\"), React.createElement(\"textarea\", {\n    placeholder: \"D\\xE9crivez votre article en quelques mots\",\n    id: \"story\",\n    name: \"story\",\n    rows: \"5\",\n    cols: \"50\",\n    value: description,\n    onChange: onChangeDescription,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"photoLinkForm\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }, \"Lien de l'image :\"), React.createElement(\"input\", {\n    placeholder: \"lien de l'image\",\n    value: imageLink,\n    onChange: onChangeImageLink,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"articleCategory\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, \"Cat\\xE9gorie de l'article :\"), React.createElement(\"select\", {\n    className: \"selectCards\",\n    onChange: e => articleByCat(e),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, categorie && categorie.map(category => React.createElement(\"option\", {\n    value: category.cat_id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }, category.cat_name)))), React.createElement(Button, {\n    className: \"addArticleButton\",\n    outline: true,\n    color: \"success\",\n    onClick: handleSubmitAdd,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, \"Ajouter cet article\")), React.createElement(\"div\", {\n    className: \"deleteCards\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"carsTitleDelete\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  }, \"Supprimer ou modifier un article :\"), React.createElement(\"select\", {\n    className: \"selectCards\",\n    onChange: e => articleWithCat(e),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }, categorie && categorie.map(category => React.createElement(\"option\", {\n    value: category.cat_id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }, category.cat_name))), React.createElement(\"div\", {\n    className: \"cardsContentAdmin\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, articleByCategory && articleByCategory.map(article => React.createElement(Cards, {\n    key: article.art_id,\n    value: article.art_id,\n    name: article.art_name,\n    photo: article.art_photo,\n    description: renderDescription(article.art_description),\n    isAdmin: true,\n    onDelete: deleteArticle,\n    onToggle: toggleModalByArticle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  })), React.createElement(Modal, {\n    isOpen: modal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }, React.createElement(ModalHeader, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  }, modifyArticle === null || modifyArticle === void 0 ? void 0 : modifyArticle.art_name), React.createElement(ModalBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  }, React.createElement(\"textarea\", {\n    value: string_copy,\n    id: \"description\",\n    rows: \"8\",\n    cols: \"48\",\n    onChange: onChangeArticle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177\n    },\n    __self: this\n  })), React.createElement(ModalFooter, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  }, React.createElement(Button, {\n    color: \"primary\",\n    onClick: onCloseModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186\n    },\n    __self: this\n  }, \"Valider\"), React.createElement(Button, {\n    color: \"secondary\",\n    onClick: onCloseModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  }, \"Annuler\"))))));\n}","map":{"version":3,"sources":["/Users/clementhere/Documents/Dév_web/Projets_perso/LeMecAVelo/client/src/components/Admin.js"],"names":["React","useState","useEffect","axios","Cards","Button","Modal","ModalHeader","ModalBody","ModalFooter","Admin","title","setTitle","description","setDescription","imageLink","setImageLink","categorie","setCategorie","article","setArticle","categoryId","setCategoryId","articleByCategory","setArticleByCategory","modal","setModal","modifyArticle","setModifyArticle","modifyContent","setModifyContent","get","then","res","data","articleByCat","event","value","target","parseInt","onChangeTitle","onChangeDescription","onChangeImageLink","handleSubmitAdd","post","art_name","art_description","art_photo","art_cat_id","response","console","log","catch","error","articleWithCat","e","deleteArticle","artId","delete","setTimeout","window","location","reload","renderDescription","onChangeArticle","onCloseModal","toggleModalByArticle","id","string_copy","slice","map","category","cat_id","cat_name","art_id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport Cards from './Cards'\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\n\nimport './Admin.css'\n\nexport default function Admin() {\n  // ADD\n  const [title, setTitle] = useState('')\n  const [description, setDescription] = useState('')\n  const [imageLink, setImageLink] = useState('')\n  const [categorie, setCategorie] = useState([])\n  const [article, setArticle] = useState([])\n  const [categoryId, setCategoryId] = useState()\n\n  // DELETE\n  const [articleByCategory, setArticleByCategory] = useState([])\n\n  // MODIFY\n  const [modal, setModal] = useState(false)\n  const [modifyArticle, setModifyArticle] = useState()\n  const [modifyContent, setModifyContent] = useState('')\n\n  // ADD NEW ARTICLE\n\n  useEffect(() => {\n    axios.get('http://localhost:4000/article')\n      .then(res => setArticle(res.data))\n\n    axios.get('http://localhost:4000/article')\n      .then(res => setArticleByCategory(res.data))\n\n    axios.get('http://localhost:4000/categorie')\n      .then(res => setCategorie(res.data))\n\n  }, [])\n\n  const articleByCat = (event) => {\n    const { value } = event.target\n    axios.get(`http://localhost:4000/article/getCatId/${value}`)\n      .then(res => setArticle(res.data))\n\n    setCategoryId(parseInt(value))\n  }\n\n  const onChangeTitle = (event) => {\n    const { value } = event.target\n    setTitle(value)\n  }\n\n  const onChangeDescription = (event) => {\n    const { value } = event.target\n    setDescription(value)\n  }\n\n  const onChangeImageLink = (event) => {\n    const { value } = event.target\n    setImageLink(value)\n  }\n\n  const handleSubmitAdd = () => {\n    axios.post('http://localhost:4000/article/', {\n      art_name: title,\n      art_description: description,\n      art_photo: imageLink,\n      art_cat_id: categoryId,\n    })\n      .then(function (response) {\n        console.log('then', response);\n      })\n      .catch(function (error) {\n        console.log('catch', error);\n      });\n  }\n\n  // DELETE\n\n  const articleWithCat = (e) => {\n    axios.get(`http://localhost:4000/article/getCatId/${e.target.value}`)\n      .then(res => setArticleByCategory(res.data))\n  }\n\n  const deleteArticle = (artId) => {\n    axios.delete(`http://localhost:4000/article/${artId}`)\n      .then(function (response) {\n        console.log('then', response);\n      })\n      .catch(function (error) {\n        console.log('catch', error);\n      });\n\n    setTimeout(() => 200, window.location.reload())\n  }\n\n  const renderDescription = (description) => (\n    <p className=\"textDescriptionAdmin\">\n      {description}\n    </p>\n  )\n\n  // MODIFY\n\n  const onChangeArticle = (event) => {\n    const { value } = event.target\n    setModifyContent(value)\n  }\n\n  const onCloseModal = () => setModal(false)\n\n  const toggleModalByArticle = (id) => {\n    axios.get(`http://localhost:4000/article/${id}`)\n      .then(res => (setModifyArticle(res.data[0])))\n    setModal(!modal)\n  }\n\n  const string_copy = (' ' + modifyContent?.art_description).slice(1);\n\n  return (\n    <div className='Admin'>\n      <div className=\"addArticle\">\n        <div className=\"titleReal\">\n          <div className=\"titleAddArticle\">Ajouter un article</div>\n          <label>Titre de l'article :</label>\n          <input placeholder='titre' value={title} onChange={onChangeTitle} />\n        </div>\n        <div className=\"descriptionForm\">\n          <div className=\"textDescriptionForm\">Description de l'article :</div>\n          <textarea\n            placeholder=\"Décrivez votre article en quelques mots\"\n            id=\"story\"\n            name=\"story\"\n            rows=\"5\"\n            cols=\"50\"\n            value={description}\n            onChange={onChangeDescription}\n          />\n        </div>\n        <div className=\"photoLinkForm\">\n          <label>Lien de l'image :</label>\n          <input placeholder=\"lien de l'image\" value={imageLink} onChange={onChangeImageLink} />\n        </div>\n        <div className=\"articleCategory\">\n          <label>Catégorie de l'article :</label>\n          <select className=\"selectCards\" onChange={(e) => articleByCat(e)}>\n            {categorie && categorie.map((category) =>\n              <option value={category.cat_id}>{category.cat_name}</option>\n            )}\n          </select>\n        </div>\n        <Button className=\"addArticleButton\" outline color=\"success\" onClick={handleSubmitAdd}>Ajouter cet article</Button>\n      </div>\n\n      <div className=\"deleteCards\">\n        <div className=\"carsTitleDelete\">Supprimer ou modifier un article :</div>\n        <select className=\"selectCards\" onChange={(e) => articleWithCat(e)}>\n          {categorie && categorie.map((category) =>\n            <option value={category.cat_id}>{category.cat_name}</option>\n          )}\n        </select>\n        <div className=\"cardsContentAdmin\">\n          {articleByCategory && articleByCategory.map(article => (\n            <Cards\n              key={article.art_id}\n              value={article.art_id}\n              name={article.art_name}\n              photo={article.art_photo}\n              description={renderDescription(article.art_description)}\n              isAdmin={true}\n              onDelete={deleteArticle}\n              onToggle={toggleModalByArticle}\n            />\n          ))}\n          <Modal isOpen={modal}>\n            <ModalHeader>{modifyArticle?.art_name}</ModalHeader>\n            <ModalBody>\n              <textarea\n                value={string_copy}\n                id=\"description\"\n                rows=\"8\"\n                cols=\"48\"\n                onChange={onChangeArticle}\n              />\n            </ModalBody>\n            <ModalFooter>\n              <Button color=\"primary\" onClick={onCloseModal}>Valider</Button>\n              <Button color=\"secondary\" onClick={onCloseModal}>Annuler</Button>\n            </ModalFooter>\n          </Modal>\n        </div>\n      </div>\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}